<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>회원가입 - 게임 아이템 거래소</title>
    
    <!-- CSS -->
    <link rel="stylesheet" href="css/common.css">
    <link rel="stylesheet" href="css/auth.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        .register-container {
            min-height: calc(100vh - 80px);
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--background-light);
            padding: 2rem 1rem;
        }
        
        .register-card {
            background: white;
            padding: 3rem;
            border-radius: 16px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 450px;
        }
        
        .register-title {
            text-align: center;
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary-purple);
            margin-bottom: 2rem;
        }
        
        .form-row {
            display: flex;
            gap: 1rem;
        }
        
        .form-row .form-group {
            flex: 1;
        }
        
        .password-strength {
            margin-top: 0.5rem;
            font-size: 0.8rem;
        }
        
        .strength-weak { color: #EF4444; }
        .strength-medium { color: #F59E0B; }
        .strength-strong { color: #10B981; }
        
        .terms-group {
            margin: 1.5rem 0;
            padding: 1rem;
            background: var(--background-light);
            border-radius: 8px;
        }
        
        .terms-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.5rem;
        }
        
        .terms-item:last-child {
            margin-bottom: 0;
        }
        
        .terms-item input[type="checkbox"] {
            width: 18px;
            height: 18px;
        }
        
        .terms-item label {
            font-size: 0.9rem;
            margin-bottom: 0;
        }
        
        .terms-link {
            color: var(--primary-purple);
            text-decoration: none;
        }
        
        .terms-link:hover {
            text-decoration: underline;
        }
        
        @media (max-width: 768px) {
            .register-card {
                padding: 2rem;
                margin: 1rem;
            }
            
            .register-title {
                font-size: 1.75rem;
            }
            
            .form-row {
                flex-direction: column;
                gap: 0;
            }
        }
    </style>
</head>
<body>
    <!-- 헤더 -->
    <header class="header">
        <a href="index.html" class="site-title">게임 아이템 거래소</a>
        <button class="menu-btn" onclick="toggleMenu()">☰</button>
    </header>
    
    <!-- 사이드 메뉴 -->
    <div class="side-menu">
        <button class="side-menu-close" onclick="closeMenu()">×</button>
        <a href="index.html" class="menu-item">홈</a>
        <a href="attendance.html" class="menu-item">출석체크</a>
        <a href="profile.html" class="menu-item">프로필</a>
        <a href="community_board.html" class="menu-item">게시판</a>
        <a href="login.html" class="menu-item">로그인</a>
        <a href="register.html" class="menu-item">회원가입</a>
    </div>

    <!-- 회원가입 컨테이너 -->
    <div class="register-container">
        <div class="register-form">
            <h2 class="register-title">회원가입</h2>
            
            <!-- 에러 메시지 -->
            <div id="errorMessage" class="alert alert-error" style="display: none;">
                <i class="fas fa-exclamation-circle"></i>
                <span>에러 메시지</span>
            </div>
            
            <!-- 성공 메시지 -->
            <div id="successMessage" class="alert alert-success" style="display: none;">
                <i class="fas fa-check-circle"></i>
                <span>성공 메시지</span>
            </div>
            
            <form action="#" method="post" id="registerForm">
                <!-- 아이디 입력란 -->
                <div class="form-group form-row">
                    <label for="username" class="form-label">아이디 :</label>
                    <div class="form-input-wrap">
                        <input type="text" 
                               id="username" 
                               name="username" 
                               placeholder="아이디 또는 전화번호" 
                               required 
                               class="form-control" />
                    </div>
                </div>
                
                <!-- 비밀번호 입력란 -->
                <div class="form-group form-row">
                    <label for="password" class="form-label">비밀번호 :</label>
                    <div class="form-input-wrap">
                        <input type="password" 
                               id="password" 
                               name="password" 
                               placeholder="비밀번호" 
                               required 
                               class="form-control" />
                    </div>
                </div>
                
                <!-- 비밀번호 확인 입력란 -->
                <div class="form-group form-row">
                    <label for="confirmPassword" class="form-label">비밀번호 확인 :</label>
                    <div class="form-input-wrap">
                        <input type="password" 
                               id="confirmPassword" 
                               name="confirmPassword" 
                               placeholder="비밀번호 확인" 
                               required 
                               class="form-control" />
                    </div>
                </div>
                
                <!-- 이메일 입력란 -->
                <div class="form-group form-row">
                    <label for="email" class="form-label">이메일 :</label>
                    <div class="form-input-wrap">
                        <input type="email" 
                               id="email" 
                               name="email" 
                               placeholder="이메일" 
                               required 
                               class="form-control" />
                    </div>
                </div>
                
                <!-- 닉네임 입력란 -->
                <div class="form-group form-row">
                    <label for="nickname" class="form-label">닉네임 :</label>
                    <div class="form-input-wrap">
                        <input type="text" 
                               id="nickname" 
                               name="nickname" 
                               placeholder="닉네임" 
                               required 
                               class="form-control" />
                    </div>
                </div>
                
                <!-- 성별 선택 -->
                <div class="form-group form-row">
                    <label class="form-label">성별 :</label>
                    <div class="gender-options">
                        <label class="gender-option">
                            <input type="radio" name="gender" value="male" required>
                            <span class="gender-text">남자</span>
                        </label>
                        <label class="gender-option">
                            <input type="radio" name="gender" value="female" required>
                            <span class="gender-text">여자</span>
                        </label>
                    </div>
                </div>
                
                <div class="form-group form-row">
                    <label class="form-label"></label>
                    <div class="form-input-wrap">
                        <button type="submit" id="registerBtn" class="btn btn-register">회원가입</button>
                    </div>
                </div>
                
                <!-- 로그인 링크 부분은 로그인 페이지에서 처리함 -->
            </form>
        </div>
    </div>

    <!-- JavaScript -->
    <script src="js/common.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // 회원가입 폼 제출 처리
            const registerForm = document.getElementById('registerForm');
            const passwordInput = document.getElementById('password');
            const confirmPasswordInput = document.getElementById('confirmPassword');
            
            if (registerForm) {
                registerForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    
                    // 진행 중임을 표시
                    const submitBtn = document.getElementById('registerBtn');
                    submitBtn.textContent = '가입 중...';
                    submitBtn.disabled = true;
                    
                    const username = document.getElementById('username').value;
                    const email = document.getElementById('email').value;
                    const password = passwordInput.value;
                    const confirmPassword = confirmPasswordInput.value;
                    const nickname = document.getElementById('nickname').value;
                    
                    // 간단한 폼 유효성 검사
                    if (!username || !email || !password || !confirmPassword || !nickname) {
                        showError('모든 필수 항목을 입력해주세요.');
                        submitBtn.textContent = '회원가입';
                        submitBtn.disabled = false;
                        return;
                    }
                    
                    if (password !== confirmPassword) {
                        showError('비밀번호와 비밀번호 확인이 일치하지 않습니다.');
                        submitBtn.textContent = '회원가입';
                        submitBtn.disabled = false;
                        return;
                    }
                    
                    // 이메일 형식 검사
                    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                    if (!emailRegex.test(email)) {
                        showError('올바른 이메일 형식이 아닙니다.');
                        submitBtn.textContent = '회원가입';
                        submitBtn.disabled = false;
                        return;
                    }
                    
                    // 임시 저장 (로컬스토리지 사용, 실제로는 서버에 저장)
                    const users = JSON.parse(localStorage.getItem('users')) || [];
                    
                    // 중복 아이디 검사
                    if (users.some(user => user.username === username)) {
                        showError('이미 사용 중인 아이디입니다.');
                        submitBtn.textContent = '회원가입';
                        submitBtn.disabled = false;
                        return;
                    }
                    
                    // 중복 이메일 검사
                    if (users.some(user => user.email === email)) {
                        showError('이미 사용 중인 이메일입니다.');
                        submitBtn.textContent = '회원가입';
                        submitBtn.disabled = false;
                        return;
                    }
                    
                    // 회원 정보 저장
                    const newUser = {
                        username: username,
                        email: email,
                        password: password,
                        nickname: nickname,
                        gender: document.querySelector('input[name="gender"]:checked')?.value || '',
                        registeredAt: new Date().toISOString()
                    };
                    
                    users.push(newUser);
                    localStorage.setItem('users', JSON.stringify(users));
                    
                    // 성공 메시지 표시
                    const successMessage = document.getElementById('successMessage');
                    successMessage.style.display = 'block';
                    successMessage.querySelector('span').textContent = '회원가입에 성공했습니다! 잠시 후 로그인 페이지로 이동합니다.';
                    
                    // 폼 초기화
                    registerForm.reset();
                    
                    // 3초 후 로그인 페이지로 이동
                    setTimeout(() => {
                        window.location.href = 'login.html';
                    }, 3000);
                });
            }
            
            // 에러 메시지 표시 함수
            function showError(message) {
                const errorMessage = document.getElementById('errorMessage');
                errorMessage.style.display = 'block';
                errorMessage.querySelector('span').textContent = message;
            }
            
            // 비밀번호 확인
            if (confirmPasswordInput) {
                confirmPasswordInput.addEventListener('input', function() {
                    const password = passwordInput.value;
                    const confirmPassword = this.value;
                    
                    if (confirmPassword && password !== confirmPassword) {
                        this.setCustomValidity('비밀번호가 일치하지 않습니다.');
                    } else {
                        this.setCustomValidity('');
                    }
                });
            }
        });
    </script>
</body>
</html>

